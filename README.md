## 操作系统实践课
### 阶段性任务
时间：2025-10-5
进度：实验四完成，中断与异常处理机制初步实现  
新增：完善了中断分派、异常处理（含页故障、非法指令、断点、未对齐、环境调用等），并通过多种自动化测试验证

## 项目概述

这是一个最小化的 RISC-V 操作系统内核，当前分支聚焦于**中断与异常处理**的实现。项目已具备系统启动、内存管理、串口通信、格式化输出等基础功能，并在本阶段实现了完整的中断与异常分派、trapframe保存与恢复、页故障自动处理等机制。

## 功能特性

### 🚀 核心功能
- **外部中断**：支持时钟、串口等外设中断，统一分派与响应
- **同步异常**：支持并测试了以下异常类型：
  - 非法指令
  - 存储/加载页故障（自动分配物理页并映射）
  - 存储/加载地址未对齐
  - 断点（ebreak）
  - 环境调用（ecall）
- **trapframe机制**：保存/恢复异常现场，支持异常后继续执行
- **异常分派与日志**：详细打印异常类型、地址、相关寄存器，便于调试


## 项目结构

```
riscv-os/
├── kernel/
│   ├── start.c          # 启动与测试
│   ├── printf.c/h       # 格式化输出与终端控制
│   ├── uart.c/h         # 串口驱动
│   ├── pm.c/h           # 物理内存管理
│   ├── vm.c/h           # 虚拟内存管理
│   ├── mem.c/h          # 基础内存操作
│   ├── trap.c/h         # 中断与异常处理（本阶段重点）
│   ├── assert.h         # 断言与错误处理
│   └── types.h          # 基本类型定义
├── Makefile
└── README.md
```

## 快速开始

### 编译运行
```bash
# 编译项目
make clean
make

# 在 QEMU 中运行
make qemu
```

## 主要测试点

- 时钟与串口中断响应
- 多种异常类型（非法指令、页故障、未对齐、断点、环境调用等）自动测试
- trapframe保存与恢复验证
- 页故障自动分配与映射

## 技术规格

- **目标架构**: RISC-V 64-bit
- **开发环境**: Ubuntu 24.04.2 LTS
- **编译器**: GCC RISC-V Cross Compiler
- **模拟器**: QEMU 系统模拟
- **代码标准**: C99
- **文档格式**: Markdown

---

**开发时间**: 2025年10月5日  
**项目状态**: 实验四完成，内存管理与虚拟内存模块已实现  